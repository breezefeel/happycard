<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ ì¹­ì°¬ ì¹´ë“œ ìƒì„±ê¸° (ë§ì¶¤ ë°°ê²½ + ë¡œê³ /QR)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap'); 

        body {
            font-family: 'Nanum Pen Script', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            text-align: center;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #4a90e2;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.5em;
            font-family: 'Nanum Gothic Coding', monospace;
        }

        .input-group input[type="text"],
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1.2em;
            font-family: 'Nanum Gothic Coding', monospace;
        }

        button {
            background-color: #f5a623;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.5em;
            font-weight: bold;
            transition: background-color 0.3s;
            box-shadow: 0 4px #e0941d;
            font-family: 'Nanum Gothic Coding', monospace;
        }

        button:hover {
            background-color: #e0941d;
        }

        button:active {
            box-shadow: 0 2px #c9851a;
            transform: translateY(2px);
        }

        #frontCanvas, #backCanvas {
            border-radius: 15px;
            margin-top: 15px;
            display: none; 
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .hint {
            margin-top: 15px;
            color: #888;
            font-size: 1em;
            font-family: 'Nanum Gothic Coding', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ¨ ë‚˜ë§Œì˜ ì¹­ì°¬ ì¹´ë“œ ë§Œë“¤ê¸° (ë§ì¶¤ ë°°ê²½ + ë¡œê³ /QR) âœ¨</h1>
        <p class="hint">ì„±í–¥ì— ë”°ë¼ ë°°ê²½ ìƒ‰ìƒê³¼ ë¶„ìœ„ê¸°ê°€ ë°”ë€Œë©°, ë’·ë©´ì— ë¬¸ì˜ ì •ë³´ê°€ ì¶”ê°€ë©ë‹ˆë‹¤.</p>

        <div class="input-group">
            <label for="userName">ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:</label>
            <input type="text" id="userName" placeholder="ì˜ˆ: í™ê¸¸ë™" maxlength="15">
        </div>

        <div class="input-group">
            <label for="personalityType">ë‚˜ì˜ ì„±í–¥ì„ ì„ íƒí•˜ì„¸ìš”:</label>
            <select id="personalityType">
                <option value="0">1. ğŸ’« ê°ì„±í˜•</option>
                <option value="1">2. ğŸ¤ ì¡°ì •í˜‘ì¡°í˜•</option>
                <option value="2">3. ğŸ¯ ì§€ë„ìí˜•</option>
                <option value="3">4. ğŸ” í˜„ì‹¤ì£¼ì˜í˜•</option>
                <option value="4">5. ğŸ’¡ ì°½ì¡°ì‚¬ê³ í˜•</option>
                <option value="5">6. âœ¨ ì™„ë²½ì£¼ì˜í˜•</option>
                <option value="6">7. ğŸ¨ ì˜ˆìˆ ì´ìƒí˜•</option>
                <option value="7">8. ğŸ­ ë…ì°½í˜•</option>
                <option value="8">9. ğŸ“ ê·œìœ¨ì›ì¹™í˜•</option>
                <option value="9">10. ğŸ’ í—Œì‹ ë°•ì• í˜•</option>
                <option value="10">11. ğŸŒˆ ë…ì°½ì´ìƒí˜•</option>
            </select>
        </div>

        <button onclick="generateBothCards()">ì•/ë’·ë©´ ì¹´ë“œ ìƒì„± & ë‹¤ìš´ë¡œë“œ</button>

        <div class="preview-area">
            <canvas id="frontCanvas" width="500" height="700"></canvas>
            <canvas id="backCanvas" width="500" height="700"></canvas>
        </div>
        
    </div>

    <script>
        // --- ì¹´ë“œ ë°ì´í„° ë° ìŠ¤íƒ€ì¼ ì •ì˜ ---
        // QR ì½”ë“œ ì´ë¯¸ì§€ ê°ì²´ (ì‹¤ì œ ì´ë¯¸ì§€ ê²½ë¡œë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤!)
        // 'íë§íŠ¸ë¦¬ ë¡œê³ ' ì´ë¯¸ì§€ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        const QR_CODE_SRC = "https://github.com/breezefeel/happycard/blob/main/QR%EC%BD%94%EB%93%9C.jpg"; // ì„ì‹œ QR ì½”ë“œ ì´ë¯¸ì§€ (ì‹¤ì œ ì´ë¯¸ì§€ URLë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”)
        const LOGO_SRC = "https://github.com/breezefeel/happycard/blob/main/%ED%9E%90%EB%A7%81%ED%8A%B8%EB%A6%AC%20%EB%A1%9C%EA%B3%A0%20(2).png"; // ì„ì‹œ ë¡œê³  ì´ë¯¸ì§€ (ì‹¤ì œ ì´ë¯¸ì§€ URLë¡œ ë³€ê²½í•´ì£¼ì„¸ìš”)

        const qrImage = new Image();
        qrImage.src = QR_CODE_SRC;
        // qrImage.onload = () => console.log("QR ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ");

        const logoImage = new Image();
        logoImage.src = LOGO_SRC;
        // logoImage.onload = () => console.log("ë¡œê³  ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ");


        const CARD_STYLES = [
            // 1. ğŸ’« ê°ì„±í˜• (ë”°ëœ»í•¨, ê³µê°)
            { front_bg: ['#f8bbd0', '#ffecb3'], front_text: '#d81b60', border: '#f06292',
              back_bg: ['#fffde7', '#fce4ec'], back_text: '#880e4f', back_accent: '#ff80ab' }, 
            // 2. ğŸ¤ ì¡°ì •í˜‘ì¡°í˜• (ì¡°í™”, í‰í™”)
            { front_bg: ['#e0f7fa', '#c5e1a5'], front_text: '#00838f', border: '#4db6ac',
              back_bg: ['#e8f5e9', '#e3f2fd'], back_text: '#2e7d32', back_accent: '#a5d6a7' },
            // 3. ğŸ¯ ì§€ë„ìí˜• (ì¶”ì§„ë ¥, í˜)
            { front_bg: ['#ffcdd2', '#f44336'], front_text: '#b71c1c', border: '#e57373',
              back_bg: ['#ffe0b2', '#ffccbc'], back_text: '#d84315', back_accent: '#ff9800' },
            // 4. ğŸ” í˜„ì‹¤ì£¼ì˜í˜• (ë¶„ì„, ëª…í™•)
            { front_bg: ['#cfd8dc', '#b0bec5'], front_text: '#263238', border: '#546e7a',
              back_bg: ['#eceff1', '#cfd8dc'], back_text: '#37474f', back_accent: '#78909c' },
            // 5. ğŸ’¡ ì°½ì¡°ì‚¬ê³ í˜• (ì•„ì´ë””ì–´, ë¹›)
            { front_bg: ['#fff9c4', '#ffeb3b'], front_text: '#f9a825', border: '#ffc107',
              back_bg: ['#fff8e1', '#fff3e0'], back_text: '#ef6c00', back_accent: '#ffca28' },
            // 6. âœ¨ ì™„ë²½ì£¼ì˜í˜• (ì •í™•, ìˆœìˆ˜)
            { front_bg: ['#e3f2fd', '#bbdefb'], front_text: '#1976d2', border: '#64b5f6',
              back_bg: ['#f5f5f5', '#e3f2fd'], back_text: '#0d47a1', back_accent: '#90caf9' },
            // 7. ğŸ¨ ì˜ˆìˆ ì´ìƒí˜• (ê¹Šì´, ê°ê°)
            { front_bg: ['#ede7f6', '#d1c4e9'], front_text: '#4527a0', border: '#7e57c2',
              back_bg: ['#f3e5f5', '#e1bee7'], back_text: '#6a1b9a', back_accent: '#ba68c8' },
            // 8. ğŸ­ ë…ì°½í˜• (ê°œì„±, ì‹ ë¹„)
            { front_bg: ['#e1f5fe', '#81d4fa'], front_text: '#01579b', border: '#29b6f6',
              back_bg: ['#f0f8ff', '#e0f7fa'], back_text: '#006064', back_accent: '#4fc3f7' },
            // 9. ğŸ“ ê·œìœ¨ì›ì¹™í˜• (ì§ˆì„œ, ì•ˆì •)
            { front_bg: ['#e8f5e9', '#c8e6c9'], front_text: '#388e3c', border: '#81c784',
              back_bg: ['#f1f8e9', '#e8f5e9'], back_text: '#1b5e20', back_accent: '#a5d6a7' },
            // 10. ğŸ’ í—Œì‹ ë°•ì• í˜• (ì‚¬ë‘, ë´‰ì‚¬)
            { front_bg: ['#fce4ec', '#f8bbd0'], front_text: '#c2185b', border: '#e91e63',
              back_bg: ['#fff8e1', '#fce4ec'], back_text: '#ad1457', back_accent: '#f48fb1' },
            // 11. ğŸŒˆ ë…ì°½ì´ìƒí˜• (ë¹„ì „, ë¯¸ë˜)
            { front_bg: ['#fbe9e7', '#ffccbc'], front_text: '#e64a19', border: '#ff8a65',
              back_bg: ['#efebe9', '#fbe9e7'], back_text: '#bf360c', back_accent: '#ffab91' }
        ];

        const CARD_DATA = [
            { type: 'ğŸ’« ê°ì„±í˜•', emoji: 'ğŸŒŸâœ¨ğŸ’•', quote1: "ë‹¹ì‹ ì˜ ë”°ëœ»í•¨ì´", quote2: "ì„¸ìƒì„ ë°í˜€ìš”", tags: "#ê³µê°ì™• #ë¶„ìœ„ê¸°ë©”ì´ì»¤", powers: ['ê³µê°ë ¥', 'ì¹œí™”ë ¥', 'ìˆœë°œë ¥'], shine: ['ì¹œêµ¬ê°€ í˜ë“¤ ë•Œ ìœ„ë¡œí•´ì¤„ ë•Œ', 'ë¶„ìœ„ê¸°ë¥¼ ë°ê²Œ ë§Œë“¤ ë•Œ', 'ì‚¬ëŒë“¤ê³¼ ê¸ˆë°© ì¹œí•´ì§ˆ ë•Œ'], growth: 'ê°€ë”ì€ ê°ê´€ì ìœ¼ë¡œë„ ìƒê°í•´ë´ìš”' },
            { type: 'ğŸ¤ ì¡°ì •í˜‘ì¡°í˜•', emoji: 'ğŸŒˆğŸ•Šï¸ğŸ’«', quote1: "ë‹¹ì‹ ì˜ ë°°ë ¤ê°€", quote2: "íŒ€ì„ í•˜ë‚˜ë¡œ ë§Œë“¤ì–´ìš”", tags: "#ì¤‘ì¬ì #ë°°ë ¤ì™•", powers: ['ì¤‘ì¬ë ¥', 'í¬ìš©ë ¥', 'ê· í˜•ê°'], shine: ['ì¹œêµ¬ë“¤ ì‹¸ìš¸ ë•Œ ì¤‘ì¬í•  ë•Œ', 'ëª¨ë‘ì˜ ì˜ê²¬ì„ ë“¤ì–´ì¤„ ë•Œ', 'ì–‘ìª½ ì…ì¥ì„ ì´í•´í•  ë•Œ'], growth: 'ë•Œë¡  ë¹ ë¥¸ ê²°ì •ë„ ê´œì°®ì•„ìš”' },
            { type: 'ğŸ¯ ì§€ë„ìí˜•', emoji: 'ğŸš€ğŸ‘‘ğŸ’ª', quote1: "ë‹¹ì‹ ì˜ ë¦¬ë”ì‹­ì´", quote2: "ê¸¸ì„ ë§Œë“¤ì–´ìš”", tags: "#ë¦¬ë” #ì¶”ì§„ì™•", powers: ['ì¶”ì§„ë ¥', 'ê²°ë‹¨ë ¥', 'ì±…ì„ê°'], shine: ['ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°ˆ ë•Œ', 'ë¹ ë¥´ê²Œ ê²°ì •í•´ì•¼ í•  ë•Œ', 'íŒ€ì„ ì´ëŒì–´ê°ˆ ë•Œ'], growth: 'ë‹¤ë¥¸ ì˜ê²¬ë„ ë“¤ì–´ë³´ëŠ” ì—¬ìœ ë¥¼!' },
            { type: 'ğŸ” í˜„ì‹¤ì£¼ì˜í˜•', emoji: 'ğŸ¯ğŸ§ ğŸ’¡', quote1: "ë‹¹ì‹ ì˜ í†µì°°ë ¥ì´", quote2: "ë¬¸ì œë¥¼ í’€ì–´ìš”", tags: "#ì „ëµê°€ #ë¶„ì„ì™•", powers: ['ë¶„ì„ë ¥', 'ì „ëµì  ì‚¬ê³ ', 'ê°ê´€ì„±'], shine: ['ë³µì¡í•œ ìƒí™©ì„ ì •ë¦¬í•  ë•Œ', 'íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì°¾ì„ ë•Œ', 'ì¥ë‹¨ì ì„ ë¹„êµí•  ë•Œ'], growth: 'ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ì‹¤í–‰í•´ë´ìš”' },
            { type: 'ğŸ’¡ ì°½ì¡°ì‚¬ê³ í˜•', emoji: 'âœ¨ğŸ¨ğŸŒŸ', quote1: "ë‹¹ì‹ ì˜ ì•„ì´ë””ì–´ê°€", quote2: "ì„¸ìƒì„ ë°”ê¿”ìš”", tags: "#ì•„ì´ë””ì–´ë±…í¬ #ì°½ì˜ì™•", powers: ['ì°½ì˜ë ¥', 'ë„ì „ì •ì‹ ', 'ì ê·¹ì„±'], shine: ['ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ë‚¼ ë•Œ', 'ë‚¨ë‹¤ë¥¸ ë°©ë²•ì„ ì‹œë„í•  ë•Œ', 'í˜¸ê¸°ì‹¬ì„ ë°œíœ˜í•  ë•Œ'], growth: 'ëê¹Œì§€ í•´ë‚´ëŠ” ëˆê¸°ë„ ê¸¸ëŸ¬ë´ìš”' },
            { type: 'âœ¨ ì™„ë²½ì£¼ì˜í˜•', emoji: 'ğŸ‘‘ğŸ’âš¡', quote1: "ë‹¹ì‹ ì˜ ê¼¼ê¼¼í•¨ì´", quote2: "ì™„ì„±ë„ë¥¼ ë†’ì—¬ìš”", tags: "#ì™„ë²½ì™• #ë””í…Œì¼ì™•", powers: ['ì •í™•ì„±', 'ì±…ì„ê°', 'ì¸ë‚´ì‹¬'], shine: ['ê¼¼ê¼¼í•˜ê²Œ ì¤€ë¹„í•  ë•Œ', 'ì™„ì„±ë„ë¥¼ ë†’ì¼ ë•Œ', 'ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•  ë•Œ'], growth: 'ì™„ë²½ë³´ë‹¤ ì™„ë£Œê°€ ì¤‘ìš”í•  ë•Œë„!' },
            { type: 'ğŸ¨ ì˜ˆìˆ ì´ìƒí˜•', emoji: 'ğŸ­ğŸŒ¸ğŸµ', quote1: "ë‹¹ì‹ ì˜ ê°ì„±ì´", quote2: "ì•„ë¦„ë‹¤ì›€ì„ ë§Œë“¤ì–´ìš”", tags: "#ì˜ˆìˆ ê°€ #ê°ì„±ì™•", powers: ['ì˜ˆìˆ ì„±', 'í‘œí˜„ë ¥', 'ëª°ì…ë ¥'], shine: ['ì•„ë¦„ë‹¤ìš´ ê²ƒì„ í‘œí˜„í•  ë•Œ', 'ë¬´ëŒ€ ìœ„ì— ìˆì„ ë•Œ', 'ì‘í’ˆì— ëª°ì…í•  ë•Œ'], growth: 'í˜„ì‹¤ì  ê³„íšë„ ì¡°ê¸ˆì”©!' },
            { type: 'ğŸ­ ë…ì°½í˜•', emoji: 'ğŸŒŸğŸ¦„âœ¨', quote1: "ë‹¹ì‹ ì˜ ë…íŠ¹í•¨ì´", quote2: "ìƒˆë¡œìš´ ê¸¸ì„ ì—´ì–´ìš”", tags: "#ë…íŠ¹ì™• #ì—­ë°œìƒì²œì¬", powers: ['ì°½ì˜ì„±', 'ë…ë¦½ì„±', 'í†µì°°ë ¥'], shine: ['ë‚¨ë‹¤ë¥¸ ê´€ì ì„ ì œì‹œí•  ë•Œ', 'ë…íŠ¹í•œ í•´ê²°ì±…ì„ ì°¾ì„ ë•Œ', 'ë‚˜ë§Œì˜ ê¸¸ì„ ê°ˆ ë•Œ'], growth: 'ê°€ë”ì€ ê¸°ë³¸ë„ ì†Œì¤‘í•´ìš”' },
            { type: 'ğŸ“ ê·œìœ¨ì›ì¹™í˜•', emoji: 'âš–ï¸ğŸ“‹âœ…', quote1: "ë‹¹ì‹ ì˜ ì›ì¹™ì´", quote2: "ì§ˆì„œë¥¼ ë§Œë“¤ì–´ìš”", tags: "#ì›ì¹™ì™• #ëª¨ë²”ìƒ", powers: ['ì„±ì‹¤í•¨', 'ì‹ ë¢°ì„±', 'ì •ì§'], shine: ['ê·œì¹™ì„ ì§€í‚¬ ë•Œ', 'ì•½ì†ì„ ì§€í‚¬ ë•Œ', 'ì˜¬ë°”ë¥¸ ê¸¸ì„ ê°ˆ ë•Œ'], growth: 'ìœµí†µì„±ë„ ë°°ì›Œë´ìš”' },
            { type: 'ğŸ’ í—Œì‹ ë°•ì• í˜•', emoji: 'ğŸ¤—ğŸ’•ğŸŒ»', quote1: "ë‹¹ì‹ ì˜ ì‚¬ë‘ì´", quote2: "ì„¸ìƒì„ ë”°ëœ»í•˜ê²Œ í•´ìš”", tags: "#ë´‰ì‚¬ì™• #ì²œì‚¬", powers: ['ë´‰ì‚¬ì •ì‹ ', 'í¬ìƒ', 'ì´íƒ€ì‹¬'], shine: ['ë‚¨ì„ ë„ìš¸ ë•Œ', 'í¬ìƒí•  ìˆ˜ ìˆì„ ë•Œ', 'ì‚¬ë‘ì„ ë‚˜ëˆŒ ë•Œ'], growth: 'ë‚˜ ìì‹ ë„ ì‚¬ë‘í•´ì¤˜ìš”' },
            { type: 'ğŸŒˆ ë…ì°½ì´ìƒí˜•', emoji: 'ğŸš€ğŸ’«ğŸ¯', quote1: "ë‹¹ì‹ ì˜ ë¹„ì „ì´", quote2: "ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ìš”", tags: "#ë¹„ì „ì™• #í˜ì‹ ê°€", powers: ['í˜ì‹ ì„±', 'ì‹¤í–‰ë ¥', 'ë¦¬ë”ì‹­'], shine: ['ìƒˆë¡œìš´ ë¹„ì „ì„ ì œì‹œí•  ë•Œ', 'í˜ì‹ ì„ ì‹¤í–‰í•  ë•Œ', 'ë¯¸ë˜ë¥¼ ê·¸ë¦´ ë•Œ'], growth: 'ì‘ì€ ê²ƒë¶€í„° ì°¨ê·¼ì°¨ê·¼!' }
        ];

        // --- ì¹´ë“œ ê·¸ë¦¬ê¸° í•¨ìˆ˜ (ë°°ê²½ ë³€ê²½ ë¡œì§ ì¶”ê°€) ---

        function drawFrontCard(canvas, cardInfo, cardStyle, userName) {
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            
            // 1. ì¹´ë“œ ë°°ê²½ 
            ctx.clearRect(0, 0, W, H);
            const gradient = ctx.createLinearGradient(0, 0, 0, H);
            gradient.addColorStop(0, cardStyle.front_bg[0]); 
            gradient.addColorStop(1, cardStyle.front_bg[1]); 
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            // 2. í…Œë‘ë¦¬
            ctx.strokeStyle = cardStyle.border;
            ctx.lineWidth = 10;
            ctx.strokeRect(5, 5, W - 10, H - 10);

            // 3. ì„±í–¥ ì´ë¦„ (Type)
            ctx.fillStyle = cardStyle.border; 
            ctx.font = 'bold 50px Nanum Pen Script, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(cardInfo.type, W / 2, 80);

            // 4. ì„±í–¥ ì´ëª¨ì§€
            ctx.font = '80px sans-serif'; 
            ctx.fillText(cardInfo.emoji, W / 2, 200);

            // 5. ì´ë¦„ ì˜ì—­
            ctx.fillStyle = '#333';
            ctx.font = '30px Nanum Pen Script, sans-serif';
            ctx.fillText("ì´ë¦„:", W / 2 - 120, 300);
            
            // ì‚¬ìš©ì ì´ë¦„ ê°•ì¡°
            ctx.fillStyle = cardStyle.front_text; 
            ctx.font = 'bold 45px Nanum Pen Script, sans-serif';
            ctx.fillText(userName, W / 2 + 30, 300);
            
            // 6. ì¹­ì°¬ ë¬¸êµ¬ (Quote)
            ctx.fillStyle = cardStyle.front_text;
            ctx.font = 'bold 40px Nanum Pen Script, sans-serif';
            ctx.fillText(cardInfo.quote1, W / 2, 450);
            ctx.fillText(cardInfo.quote2, W / 2, 510);
            
            // 7. í•´ì‹œíƒœê·¸
            ctx.fillStyle = '#666';
            ctx.font = '35px Nanum Pen Script, sans-serif';
            ctx.fillText(cardInfo.tags, W / 2, 650);
        }

        function drawBackCard(canvas, cardInfo, cardStyle) {
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;

            // 1. ì¹´ë“œ ë°°ê²½ 
            ctx.clearRect(0, 0, W, H);
            const gradient = ctx.createLinearGradient(0, 0, 0, H);
            gradient.addColorStop(0, cardStyle.back_bg[0]); 
            gradient.addColorStop(1, cardStyle.back_bg[1]); 
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            // 2. í…Œë‘ë¦¬
            ctx.strokeStyle = cardStyle.back_accent; 
            ctx.lineWidth = 10;
            ctx.strokeRect(5, 5, W - 10, H - 10);

            ctx.textAlign = 'left'; 
            let y = 80;

            // 3. ë‚˜ì˜ ìŠˆí¼íŒŒì›Œ
            ctx.fillStyle = cardStyle.back_text;
            ctx.font = 'bold 35px Nanum Gothic Coding, monospace';
            ctx.fillText("ğŸ’ª ë‚˜ì˜ ìŠˆí¼íŒŒì›Œ", 50, y);
            y += 40;
            
            ctx.fillStyle = '#333';
            ctx.font = '30px Nanum Gothic Coding, monospace';
            cardInfo.powers.forEach(power => {
                ctx.fillText(`â­ ${power}`, 60, y);
                y += 40;
            });

            y += 30; // ê°„ê²©

            // 4. ë‚˜ëŠ” ì´ëŸ´ ë•Œ ë¹›ë‚˜ìš”
            ctx.fillStyle = cardStyle.back_accent; 
            ctx.font = 'bold 35px Nanum Gothic Coding, monospace';
            ctx.fillText("ğŸ’ ë‚˜ëŠ” ì´ëŸ´ ë•Œ ë¹›ë‚˜ìš”:", 50, y);
            y += 40;

            ctx.fillStyle = '#333';
            ctx.font = '28px Nanum Gothic Coding, monospace';
            cardInfo.shine.forEach(item => {
                ctx.fillText(`â€¢ ${item}`, 60, y);
                y += 35;
            });

            y += 30; // ê°„ê²©

            // 5. ì„±ì¥ í¬ì¸íŠ¸
            ctx.fillStyle = cardStyle.back_text; 
            ctx.font = 'bold 35px Nanum Gothic Coding, monospace';
            ctx.fillText("ğŸ’¡ ì„±ì¥ í¬ì¸íŠ¸:", 50, y);
            y += 40;

            ctx.fillStyle = '#333';
            ctx.font = '30px Nanum Gothic Coding, monospace';
            ctx.fillText(cardInfo.growth, 60, y);
            
            // --- 6. í•˜ë‹¨ ì •ë³´ ì˜ì—­ (ë¡œê³ , ë¬¸ì˜ ë¬¸êµ¬, QR ì½”ë“œ) ---
            const FOOTER_Y = 550; // í•˜ë‹¨ ì •ë³´ ì‹œì‘ Y ì¢Œí‘œ
            const LOGO_W = 150;
            const LOGO_H = 40;
            const QR_SIZE = 90;
            const INQUIRY_Y = FOOTER_Y + 120;

            // 6-1. íë§íŠ¸ë¦¬ ë¡œê³ 
            ctx.textAlign = 'center';
            if (logoImage.complete) {
                // ë¡œê³  ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì—ˆìœ¼ë©´ ê·¸ë¦¬ê¸°
                ctx.drawImage(logoImage, W / 2 - LOGO_W / 2, FOOTER_Y, LOGO_W, LOGO_H);
            } else {
                // ë¡œê³  ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ í…ìŠ¤íŠ¸ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ê²½ê³ 
                ctx.fillStyle = '#444';
                ctx.font = 'bold 30px Nanum Gothic Coding, monospace';
                ctx.fillText("íë§íŠ¸ë¦¬ ë¡œê³ ", W / 2, FOOTER_Y + LOGO_H);
            }

            // 6-2. QR ì½”ë“œ (ì˜¤ë¥¸ìª½)
            const QR_X = W - 50 - QR_SIZE;
            const QR_Y = FOOTER_Y + 10;
            if (qrImage.complete) {
                // QR ì´ë¯¸ì§€ê°€ ë¡œë“œë˜ì—ˆìœ¼ë©´ ê·¸ë¦¬ê¸°
                ctx.drawImage(qrImage, QR_X, QR_Y, QR_SIZE, QR_SIZE);
            } else {
                // ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ëŒ€ì²´ ì‚¬ê°í˜• ê·¸ë¦¬ê¸°
                ctx.fillStyle = '#ddd';
                ctx.fillRect(QR_X, QR_Y, QR_SIZE, QR_SIZE);
                ctx.fillStyle = '#444';
                ctx.font = '15px Nanum Gothic Coding, monospace';
                ctx.fillText("QR", QR_X + QR_SIZE / 2, QR_Y + QR_SIZE / 2 + 5);
            }

            // 6-3. ë¬¸ì˜ ë¬¸êµ¬ (ì™¼ìª½)
            ctx.textAlign = 'left';
            ctx.fillStyle = cardStyle.back_text; 
            ctx.font = 'bold 25px Nanum Gothic Coding, monospace';
            ctx.fillText("ì„ ì²œì  ì„±í–¥/ì¬ëŠ¥ ìƒë‹´ ë¬¸ì˜", 50, INQUIRY_Y);
            
            // 6-4. QR ì½”ë“œ ì˜†ì— ë¬¸ì˜ ë‚´ìš© (ì˜ˆì‹œ)
            ctx.fillStyle = '#666'; 
            ctx.font = '22px Nanum Gothic Coding, monospace';
            ctx.fillText("ìŠ¤ìº”í•˜ì‹œë©´ ìì„¸í•œ ì•ˆë‚´ë¥¼...", 50, INQUIRY_Y + 30);
        }


        // --- ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜ ë° ë‹¤ìš´ë¡œë“œ í—¬í¼ í•¨ìˆ˜ (ì´ì „ê³¼ ë™ì¼) ---
        function generateBothCards() {
            const userName = document.getElementById('userName').value.trim();
            const typeIndex = document.getElementById('personalityType').value;
            const cardInfo = CARD_DATA[typeIndex];
            const cardStyle = CARD_STYLES[typeIndex]; 

            if (!userName) {
                alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            const frontCanvas = document.getElementById('frontCanvas');
            const backCanvas = document.getElementById('backCanvas');
            
            frontCanvas.style.display = 'block'; 
            backCanvas.style.display = 'block'; 

            // ë¡œê³ /QR ì´ë¯¸ì§€ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê±°ë‚˜ ë°”ë¡œ ì‹¤í–‰
            // ì—¬ê¸°ì„œëŠ” ì´ë¯¸ì§€ë¥¼ ì¦‰ì‹œ ë¡œë“œí•˜ëŠ” ê²ƒì„ ê°€ì •í•˜ê³  ì§„í–‰í•©ë‹ˆë‹¤. (ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” ë³µì¡í•´ì§€ë¯€ë¡œ ë‹¨ìˆœí™”)
            drawFrontCard(frontCanvas, cardInfo, cardStyle, userName);
            drawBackCard(backCanvas, cardInfo, cardStyle);

            downloadCanvasImage(frontCanvas, `ì¹­ì°¬ì¹´ë“œ_ì•ë©´_${userName}_${cardInfo.type.replace(/\s/g, '_')}.png`);
            downloadCanvasImage(backCanvas, `ì¹­ì°¬ì¹´ë“œ_ë’·ë©´_${userName}_${cardInfo.type.replace(/\s/g, '_')}.png`);
            
            alert(`"${userName}"ë‹˜ì˜ ${cardInfo.type} ì¹­ì°¬ ì¹´ë“œê°€ (ì•ë©´/ë’·ë©´) 2ì¥ ëª¨ë‘ ìƒì„±ë˜ì–´ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤!`);
        }

        function downloadCanvasImage(canvas, fileName) {
            const imageURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.href = imageURL;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>

</html>
