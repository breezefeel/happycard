<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹­ì°¬ ì¹´ë“œ ë§Œë“¤ê¸° (í°íŠ¸ í†µì¼)</title>
    <style>
        /* í°íŠ¸: Nanum Pen ScriptëŠ” ì œëª© ë° ì£¼ìš” ê°•ì¡°, Nanum Gothic Codingì€ ë³¸ë¬¸ ë° ìƒì„¸ ì •ë³´ì— ì‚¬ìš© */
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=Nanum+Gothic+Coding&display=swap'); 

        body { font-family: 'Nanum Pen Script', sans-serif; background-color: #f0f4f8; color: #333; text-align: center; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }
        h1 { color: #4a90e2; margin-bottom: 20px; font-size: 2.5em; }
        
        /* í°íŠ¸ ì§€ì • í†µì¼ */
        .input-group label { font-family: 'Nanum Gothic Coding', monospace; }
        .input-group input[type="text"], .input-group select { font-family: 'Nanum Gothic Coding', monospace; }
        button { font-family: 'Nanum Gothic Coding', monospace; }

        /* ëª¨ë“  ìº”ë²„ìŠ¤ ìŠ¤íƒ€ì¼ í†µì¼ */
        #frontCanvas, #backCanvas, #allComplimentsCanvas1, #allComplimentsCanvas2, #allComplimentsCanvas3, #allComplimentsCanvas4 { 
            border-radius: 15px; margin-top: 15px; 
            display: none; margin-left: auto; margin-right: auto; 
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); max-width: 100%; height: auto; 
        }
        
        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 8px; font-size: 1.5em; }
        .input-group input[type="text"], .input-group select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1.2em; }
        button { background-color: #f5a623; color: white; padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-size: 1.5em; font-weight: bold; transition: background-color 0.3s; box-shadow: 0 4px #e0941d; }
        button:hover { background-color: #e0941d; }
        button:active { box-shadow: 0 2px #c9851a; transform: translateY(2px); }
        .hint { margin-top: 15px; color: #888; font-size: 1em; font-family: 'Nanum Gothic Coding', monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ¨ ë‚˜ë§Œì˜ âœ¨<br>ì¹­ì°¬ ì¹´ë“œ ë§Œë“¤ê¸° </h1>
        <p class="hint"> ì„±í–¥ì— ê¼­ ë§ëŠ” ì¹­ì°¬ì€, ë” ë§ˆìŒ ê¹Šì´ ì™€ë‹¿ê³  ë” ì§„ì‹¬ì²˜ëŸ¼ ëŠê»´ì§‘ë‹ˆë‹¤</p>

        <div class="input-group">
            <label for="userName">ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:</label>
            <input type="text" id="userName" placeholder="ì˜ˆ: í™ê¸¸ë™" maxlength="15">
        </div>

        <div class="input-group">
            <label for="personalityType">ì„±í–¥ì„ ì„ íƒí•˜ì„¸ìš”:</label>
            <select id="personalityType">
                <option value="0">1. ğŸ’« ê°ì„±í˜•</option>
                <option value="1">2. ğŸ¤ ì¡°ì •í˜‘ì¡°í˜•</option>
                <option value="2">3. ğŸ¯ ì§€ë„ìí˜•</option>
                <option value="3">4. ğŸ” í˜„ì‹¤ì£¼ì˜í˜•</option>
                <option value="4">5. ğŸ’¡ ì°½ì¡°ì‚¬ê³ í˜•</option>
                <option value="5">6. âœ¨ ì™„ë²½ì£¼ì˜í˜•</option>
                <option value="6">7. ğŸ¨ ì˜ˆìˆ ì´ìƒí˜•</option>
                <option value="7">8. ğŸ­ ë…ì°½í˜•</option>
                <option value="8">9. ğŸ“ ê·œìœ¨ì›ì¹™í˜•</option>
                <option value="9">10. ğŸ’ í—Œì‹ ë°•ì• í˜•</option>
                <option value="10">11. ğŸŒˆ ë…ì°½ì´ìƒí˜•</option>            
            </select>
        </div>

        <button onclick="generateBothCards()">ì¹­ì°¬ í•˜ê¸°</button>
        
        <div class="preview-area">
            <canvas id="frontCanvas" width="500" height="700" style="display: none;"></canvas>
            <canvas id="backCanvas" width="500" height="700" style="display: none;"></canvas>
            
            <canvas id="allComplimentsCanvas1" width="500" height="1100" style="display: none;"></canvas>
            <canvas id="allComplimentsCanvas2" width="500" height="1100" style="display: none;"></canvas>
            <canvas id="allComplimentsCanvas3" width="500" height="1100" style="display: none;"></canvas>
            <canvas id="allComplimentsCanvas4" width="500" height="1100" style="display: none;"></canvas>
        </div>
    </div>

    <script>
        // --- 1. ì´ë¯¸ì§€ ë° ë°ì´í„° ì •ì˜ (ëª¨ë“  ë¬¸ë²• ì˜¤ë¥˜ ìˆ˜ì • ì™„ë£Œ) ---
        const CARD_STYLES = [
            { front_bg: ['#f8bbd0', '#ffecb3'], front_text: '#d81b60', border: '#f06292', back_bg: ['#fffde7', '#fce4ec'], back_text: '#880e4f', back_accent: '#ff80ab', comp_bg: '#ffcdd2', comp_text: '#d81b60' }, 
            { front_bg: ['#e0f7fa', '#c5e1a5'], front_text: '#00838f', border: '#4db6ac', back_bg: ['#e8f5e9', '#e3f2fd'], back_text: '#2e7d32', back_accent: '#a5d6a7', comp_bg: '#e0f7fa', comp_text: '#00838f' }, 
            { front_bg: ['#ffcdd2', '#f44336'], front_text: '#b71c1c', border: '#e57373', back_bg: ['#ffe0b2', '#ffccbc'], back_text: '#d84315', back_accent: '#ff9800', comp_bg: '#ffcdd2', comp_text: '#b71c1c' }, 
            { front_bg: ['#cfd8dc', '#b0bec5'], front_text: '#263238', border: '#546e7a', back_bg: ['#eceff1', '#cfd8dc'], back_text: '#37474f', back_accent: '#78909c', comp_bg: '#cfd8dc', comp_text: '#263238' }, 
            { front_bg: ['#fff9c4', '#ffeb3b'], front_text: '#f9a825', border: '#ffc107', back_bg: ['#fff8e1', '#fff3e0'], back_text: '#ef6c00', back_accent: '#ffca28', comp_bg: '#fff9c4', comp_text: '#f9a825' }, 
            { front_bg: ['#e3f2fd', '#bbdefb'], front_text: '#1976d2', border: '#64b5f6', back_bg: ['#f5f5f5', '#e3f2fd'], back_text: '#0d47a1', back_accent: '#90caf9', comp_bg: '#e3f2fd', comp_text: '#1976d2' }, 
            { front_bg: ['#ede7f6', '#d1c4e9'], front_text: '#4527a0', border: '#7e57c2', back_bg: ['#f3e5f5', '#e1bee7'], back_text: '#6a1b9a', back_accent: '#ba68c8', comp_bg: '#ede7f6', comp_text: '#4527a0' }, 
            { front_bg: ['#e1f5fe', '#81d4fa'], front_text: '#01579b', border: '#29b6f6', back_bg: ['#f0f8ff', '#e0f7fa'], back_text: '#006064', back_accent: '#4fc3f7', comp_bg: '#e1f5fe', comp_text: '#01579b' }, 
            { front_bg: ['#e8f5e9', '#c8e6c9'], front_text: '#388e3c', border: '#81c784', back_bg: ['#f1f8e9', '#e8f5e9'], back_text: '#1b5e20', back_accent: '#a5d6a7', comp_bg: '#e8f5e9', comp_text: '#388e3c' }, 
            { front_bg: ['#fce4ec', '#f8bbd0'], front_text: '#c2185b', border: '#e91e63', back_bg: ['#fff8e1', '#fce4ec'], back_text: '#ad1457', back_accent: '#f48fb1', comp_bg: '#fce4ec', comp_text: '#c2185b' }, 
            { front_bg: ['#fbe9e7', '#ffccbc'], front_text: '#e64a19', border: '#ff8a65', back_bg: ['#efebe9', '#fbe9e7'], back_text: '#bf360c', back_accent: '#ffab91', comp_bg: '#fbe9e7', comp_text: '#e64a19' }, 
            { front_bg: ['#c8e6c9', '#a5d6a7'], front_text: '#388e3c', border: '#66bb6a', back_bg: ['#f1f8e9', '#e8f5e9'], back_text: '#43a047', back_accent: '#8bc34a', comp_bg: '#c8e6c9', comp_text: '#43a047' }
        ];

        // ğŸš¨ ëª¨ë“  compliments ë°ì´í„°ë¥¼ phrase1, phrase2ë¡œ í†µì¼ (undefined í•´ê²°)
        const CARD_DATA = [
            { type: 'ğŸ’« ê°ì„±í˜•', emoji: 'ğŸŒŸâœ¨ğŸ’•', quote1: "ë‹¹ì‹ ì˜ ë”°ëœ»í•¨ì´", quote2: "ì„¸ìƒì„ ë°í˜€ìš”", tags: "#ê³µê°ì™• #ë¶„ìœ„ê¸°ë©”ì´ì»¤", powers: ['ê³µê°ë ¥', 'ì¹œí™”ë ¥', 'ìˆœë°œë ¥'], shine: ['ì¹œêµ¬ê°€ í˜ë“¤ ë•Œ ìœ„ë¡œí•´ì¤„ ë•Œ', 'ë¶„ìœ„ê¸°ë¥¼ ë°ê²Œ ë§Œë“¤ ë•Œ', 'ì‚¬ëŒë“¤ê³¼ ê¸ˆë°© ì¹œí•´ì§ˆ ë•Œ'], growth: 'ê°€ë”ì€ ê°ê´€ì ìœ¼ë¡œë„ ìƒê°í•´ë´ìš”',
              compliments: [{ tag: 'ğŸ’• ê³µê°ì™•', phrase1: 'ë„ˆë‘ ì–˜ê¸°í•˜ë©´', phrase2: 'ìœ„ë¡œë¼' }, { tag: 'ğŸ’« ë¶„ìœ„ê¸°ë©”ì´ì»¤', phrase1: 'ë„¤ê°€ ìˆìœ¼ë©´', phrase2: 'ë‹¤ë“¤ ì›ƒì–´' }, { tag: 'âœ¨ ê°ì„±ì™•', phrase1: 'ë„ˆ ë§ ë“¤ì–´ì£¼ë‹ˆê¹Œ', phrase2: 'ì§„ì§œ ì¢‹ì•„' }] },
            { type: 'ğŸ¤ ì¡°ì •í˜‘ì¡°í˜•', emoji: 'ğŸŒˆğŸ•Šï¸ğŸ’«', quote1: "ë‹¹ì‹ ì˜ ë°°ë ¤ê°€", quote2: "íŒ€ì„ í•˜ë‚˜ë¡œ ë§Œë“¤ì–´ìš”", tags: "#ì¤‘ì¬ì #ë°°ë ¤ì™•", powers: ['ì¤‘ì¬ë ¥', 'í¬ìš©ë ¥', 'ê· í˜•ê°'], shine: ['ì¹œêµ¬ë“¤ ì‹¸ìš¸ ë•Œ ì¤‘ì¬í•  ë•Œ', 'ëª¨ë‘ì˜ ì˜ê²¬ì„ ë“¤ì–´ì¤„ ë•Œ', 'ì–‘ìª½ ì…ì¥ì„ ì´í•´í•  ë•Œ'], growth: 'ë•Œë¡  ë¹ ë¥¸ ê²°ì •ë„ ê´œì°®ì•„ìš”',
              compliments: [{ tag: 'ğŸ¤ ì¤‘ì¬ì™•', phrase1: 'ë„ˆ ë•ë¶„ì—', phrase2: 'í™”í•´í–ˆì–´' }, { tag: 'ğŸŒˆ ë°°ë ¤ì™•', phrase1: 'ë„¤ê°€ ë‹¤ ì±™ê²¨ì¤˜ì„œ', phrase2: 'ê³ ë§ˆì›Œ' }, { tag: 'ğŸ’ ì¡°ìœ¨ì™•', phrase1: 'ëª¨ë‘ì˜ ì˜ê²¬', phrase2: 'ë“¤ì–´ì¤˜ì„œ ì¢‹ì•„' }] },
            { type: 'ğŸ¯ ì§€ë„ìí˜•', emoji: 'ğŸš€ğŸ‘‘ğŸ’ª', quote1: "ë‹¹ì‹ ì˜ ë¦¬ë”ì‹­ì´", quote2: "ê¸¸ì„ ë§Œë“¤ì–´ìš”", tags: "#ë¦¬ë” #ì¶”ì§„ì™•", powers: ['ì¶”ì§„ë ¥', 'ê²°ë‹¨ë ¥', 'ì±…ì„ê°'], shine: ['ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°ˆ ë•Œ', 'ë¹ ë¥´ê²Œ ê²°ì •í•´ì•¼ í•  ë•Œ', 'íŒ€ì„ ì´ëŒì–´ê°ˆ ë•Œ'], growth: 'ë‹¤ë¥¸ ì˜ê²¬ë„ ë“¤ì–´ë³´ëŠ” ì—¬ìœ ë¥¼!',
              compliments: [{ tag: 'ğŸ¯ ê²°ì •ì™•', phrase1: 'ë„¤ê°€ ì •í•´ì¤˜ì„œ', phrase2: 'í¸í•´!' }, { tag: 'ğŸ‘‘ ë¦¬ë”ì™•', phrase1: 'ë„ˆ ë”°ë¼ê°€ë©´', phrase2: 'ì¼ì´ ìˆ ìˆ  ë¼' }, { tag: 'ğŸš€ ì¶”ì§„ì™•', phrase1: 'ë„¤ ì¶”ì§„ë ¥ ë•ë¶„ì—', phrase2: 'í•´ëƒˆì–´' }] },
            { type: 'ğŸ” í˜„ì‹¤ì£¼ì˜í˜•', emoji: 'ğŸ¯ğŸ§ ğŸ’¡', quote1: "ë‹¹ì‹ ì˜ í†µì°°ë ¥ì´", quote2: "ë¬¸ì œë¥¼ í’€ì–´ìš”", tags: "#ì „ëµê°€ #ë¶„ì„ì™•", powers: ['ë¶„ì„ë ¥', 'ì „ëµì  ì‚¬ê³ ', 'ê°ê´€ì„±'], shine: ['ë³µì¡í•œ ìƒí™©ì„ ì •ë¦¬í•  ë•Œ', 'íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì°¾ì„ ë•Œ', 'ì¥ë‹¨ì ì„ ë¹„êµí•  ë•Œ'], growth: 'ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ì‹¤í–‰í•´ë´ìš”',
              compliments: [{ tag: 'ğŸ” ë¶„ì„ì™•', phrase1: 'ë„¤ê°€ ì •ë¦¬í•´ì£¼ë‹ˆê¹Œ', phrase2: 'ì´í•´ ì‰¬ì›Œ' }, { tag: 'ğŸ¯ ì „ëµì™•', phrase1: 'ë„ˆ ê³„íš ì§œëŠ” ê±°', phrase2: 'ì§„ì§œ íƒ„íƒ„í•´' }, { tag: 'ğŸ§  íš¨ìœ¨ì™•', phrase1: 'ë„¤ ë°©ë²•ì´', phrase2: 'ì œì¼ ë¹ ë¥´ë”ë¼' }] },
            { type: 'ğŸ’¡ ì°½ì¡°ì‚¬ê³ í˜•', emoji: 'âœ¨ğŸ¨ğŸŒŸ', quote1: "ë‹¹ì‹ ì˜ ì•„ì´ë””ì–´ê°€", quote2: "ì„¸ìƒì„ ë°”ê¿”ìš”", tags: "#ì•„ì´ë””ì–´ë±…í¬ #ì°½ì˜ì™•", powers: ['ì°½ì˜ë ¥', 'ë„ì „ì •ì‹ ', 'ì ê·¹ì„±'], shine: ['ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ë‚¼ ë•Œ', 'ë‚¨ë‹¤ë¥¸ ë°©ë²•ì„ ì‹œë„í•  ë•Œ', 'í˜¸ê¸°ì‹¬ì„ ë°œíœ˜í•  ë•Œ'], growth: 'ëê¹Œì§€ í•´ë‚´ëŠ” ëˆê¸°ë„ ê¸¸ëŸ¬ë´ìš”',
              compliments: [{ tag: 'ğŸ’¡ ì•„ì´ë””ì–´ì™•', phrase1: 'ë„ˆ ìƒê°ì´', phrase2: 'ì œì¼ ì°¸ì‹ í•´' }, { tag: 'âœ¨ ì°½ì˜ì™•', phrase1: 'ë„¤ ë°œìƒì€', phrase2: 'ì§„ì§œ ë…íŠ¹í•´' }, { tag: 'ğŸŒŸ ë„ì „ì™•', phrase1: 'ë„¤ê°€ ë¨¼ì € ì‹œë„í•´ì¤˜ì„œ', phrase2: 'ì¢‹ì•„' }] },
            { type: 'âœ¨ ì™„ë²½ì£¼ì˜í˜•', emoji: 'ğŸ‘‘ğŸ’âš¡', quote1: "ë‹¹ì‹ ì˜ ê¼¼ê¼¼í•¨ì´", quote2: "ì™„ì„±ë„ë¥¼ ë†’ì—¬ìš”", tags: "#ì™„ë²½ì™• #ë””í…Œì¼ì™•", powers: ['ì •í™•ì„±', 'ì±…ì„ê°', 'ì¸ë‚´ì‹¬'], shine: ['ê¼¼ê¼¼í•˜ê²Œ ì¤€ë¹„í•  ë•Œ', 'ì™„ì„±ë„ë¥¼ ë†’ì¼ ë•Œ', 'ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•  ë•Œ'], growth: 'ì™„ë²½ë³´ë‹¤ ì™„ë£Œê°€ ì¤‘ìš”í•  ë•Œë„!',
              compliments: [{ tag: 'âœ¨ ì™„ë²½ì™•', phrase1: 'ë„ˆëŠ” í•­ìƒ ê¼¼ê¼¼í•´ì„œ', phrase2: 'ë¯¿ìŒì§í•´' }, { tag: 'ğŸ’ ë””í…Œì¼ì™•', phrase1: 'ë„¤ê°€ í™•ì¸í•´ì£¼ë©´', phrase2: 'ì•ˆì‹¬ì´ì•¼' }, { tag: 'ğŸ‘‘ ì •í™•ì™•', phrase1: 'ë„ˆ ë•ë¶„ì—', phrase2: 'ì‹¤ìˆ˜ê°€ ì—†ì–´' }] },
            { type: 'ğŸ¨ ì˜ˆìˆ ì´ìƒí˜•', emoji: 'ğŸ­ğŸŒ¸ğŸµ', quote1: "ë‹¹ì‹ ì˜ ê°ì„±ì´", quote2: "ì•„ë¦„ë‹¤ì›€ì„ ë§Œë“¤ì–´ìš”", tags: "#ì˜ˆìˆ ê°€ #ê°ì„±ì™•", powers: ['ì˜ˆìˆ ì„±', 'í‘œí˜„ë ¥', 'ëª°ì…ë ¥'], shine: ['ì•„ë¦„ë‹¤ìš´ ê²ƒì„ í‘œí˜„í•  ë•Œ', 'ë¬´ëŒ€ ìœ„ì— ìˆì„ ë•Œ', 'ì‘í’ˆì— ëª°ì…í•  ë•Œ'], growth: 'í˜„ì‹¤ì  ê³„íšë„ ì¡°ê¸ˆì”©!',
              compliments: [{ tag: 'ğŸ¨ ì˜ˆìˆ ì™•', phrase1: 'ë„ˆ í‘œí˜„í•˜ëŠ” ê±°', phrase2: 'ì§„ì§œ ë©‹ìˆì–´' }, { tag: 'ğŸ­ ê°ì„±ì™•', phrase1: 'ë„¤ ì‘í’ˆì€', phrase2: 'ê°ë™ì ì´ì•¼' }, { tag: 'ğŸŒ¸ í‘œí˜„ì™•', phrase1: 'ë„ˆë§Œì˜ ìŠ¤íƒ€ì¼ì´', phrase2: 'ì•„ë¦„ë‹¤ì›Œ' }] },
            { type: 'ğŸ­ ë…ì°½í˜•', emoji: 'ğŸŒŸğŸ¦„âœ¨', quote1: "ë‹¹ì‹ ì˜ ë…íŠ¹í•¨ì´", quote2: "ìƒˆë¡œìš´ ê¸¸ì„ ì—´ì–´ìš”", tags: "#ë…íŠ¹ì™• #ì—­ë°œìƒì²œì¬", powers: ['ì°½ì˜ì„±', 'ë…ë¦½ì„±', 'í†µì°°ë ¥'], shine: ['ë‚¨ë‹¤ë¥¸ ê´€ì ì„ ì œì‹œí•  ë•Œ', 'ë…íŠ¹í•œ í•´ê²°ì±…ì„ ì°¾ì„ ë•Œ', 'ë‚˜ë§Œì˜ ê¸¸ì„ ê°ˆ ë•Œ'], growth: 'ê°€ë”ì€ ê¸°ë³¸ë„ ì†Œì¤‘í•´ìš”',
              compliments: [{ tag: 'ğŸ­ ê°œì„±ì™•', phrase1: 'ë„ˆë§Œì˜ ìŠ¤íƒ€ì¼ì´', phrase2: 'ë©‹ì ¸' }, { tag: 'ğŸ¦„ ë…íŠ¹ì™•', phrase1: 'ë„¤ ê´€ì ì€', phrase2: 'ì •ë§ ìƒˆë¡œì›Œ' }, { tag: 'â­ ì—­ë°œìƒì™•', phrase1: 'ê·¸ ìƒê°ì€', phrase2: 'ìƒê°ë„ ëª»í–ˆì–´!' }] },
            { type: 'ğŸ“ ê·œìœ¨ì›ì¹™í˜•', emoji: 'âš–ï¸ğŸ“‹âœ…', quote1: "ë‹¹ì‹ ì˜ ì›ì¹™ì´", quote2: "ì§ˆì„œë¥¼ ë§Œë“¤ì–´ìš”", tags: "#ì›ì¹™ì™• #ëª¨ë²”ìƒ", 
              powers: ['ì„±ì‹¤í•¨', 'ì‹ ë¢°ì„±', 'ì •ì§'], 
              shine: ['ê·œì¹™ì„ ì§€í‚¬ ë•Œ', 'ì•½ì†ì„ ì§€í‚¬ ë•Œ', 'ì˜¬ë°”ë¥¸ ê¸¸ì„ ê°ˆ ë•Œ'], growth: 'ìœµí†µì„±ë„ ë°°ì›Œë´ìš”',
              compliments: [{ tag: 'ğŸ“ ì›ì¹™ì™•', phrase1: 'ë„¤ê°€ ìˆì–´ì„œ ê·œì¹™ì´', phrase2: 'ì˜ ì§€ì¼œì ¸' }, { tag: 'âœ… ì„±ì‹¤ì™•', phrase1: 'ë„ˆëŠ” ì•½ì†ì„ ê¼­', phrase2: 'ì§€ì¼œì¤˜ì„œ ì¢‹ì•„' }, { tag: 'âš–ï¸ ì •ì§ì™•', phrase1: 'ë„¤ê°€', phrase2: 'ì œì¼ ë¯¿ì„ ë§Œí•´' }] },
            { type: 'ğŸ’ í—Œì‹ ë°•ì• í˜•', emoji: 'ğŸ¤—ğŸ’•ğŸŒ»', quote1: "ë‹¹ì‹ ì˜ ì‚¬ë‘ì´", quote2: "ì„¸ìƒì„ ë”°ëœ»í•˜ê²Œ í•´ìš”", tags: "#ë´‰ì‚¬ì™• #ì²œì‚¬", powers: ['ë´‰ì‚¬ì •ì‹ ', 'í¬ìƒ', 'ì´íƒ€ì‹¬'], shine: ['ë‚¨ì„ ë„ìš¸ ë•Œ', 'í¬ìƒí•  ìˆ˜ ìˆì„ ë•Œ', 'ì‚¬ë‘ì„ ë‚˜ëˆŒ ë•Œ'], growth: 'ë‚˜ ìì‹ ë„ ì‚¬ë‘í•´ì¤˜ìš”',
              compliments: [{ tag: 'ğŸ’ ë´‰ì‚¬ì™•', phrase1: 'ë„ˆ ë•ë¶„ì—', phrase2: 'ë§ì€ ë„ì›€ ë°›ì•˜ì–´' }, { tag: 'ğŸ¤— ì²œì‚¬ì™•', phrase1: 'ë„¤ ë§ˆìŒì´', phrase2: 'ì •ë§ ë”°ëœ»í•´' }, { tag: 'ğŸŒ» í¬ìƒì™•', phrase1: 'ë„Œ í•­ìƒ ë‚¨ì„', phrase2: 'ë¨¼ì € ìƒê°í•´ì¤˜' }] },
            { type: 'ğŸŒˆ ë…ì°½ì´ìƒí˜•', emoji: 'ğŸš€ğŸ’«ğŸ¯', quote1: "ë‹¹ì‹ ì˜ ë¹„ì „ì´", quote2: "ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ìš”", tags: "#ë¹„ì „ì™• #í˜ì‹ ê°€", powers: ['í˜ì‹ ì„±', 'ì‹¤í–‰ë ¥', 'ë¦¬ë”ì‹­'], shine: ['ìƒˆë¡œìš´ ë¹„ì „ì„ ì œì‹œí•  ë•Œ', 'í˜ì‹ ì„ ì‹¤í–‰í•  ë•Œ', 'ë¯¸ë˜ë¥¼ ê·¸ë¦´ ë•Œ'], growth: 'ì‘ì€ ê²ƒë¶€í„° ì°¨ê·¼ì°¨ê·¼!',
              compliments: [{ tag: 'ğŸŒˆ ë¹„ì „ì™•', phrase1: 'ë„ˆëŠ” ìƒê°ì˜', phrase2: 'ìŠ¤ì¼€ì¼ì´ ë‹¬ë¼' }, { tag: 'ğŸš€ í˜ì‹ ì™•', phrase1: 'ë„¤ ì•„ì´ë””ì–´ê°€', phrase2: 'ë¯¸ë˜ë¥¼ ë°”ê¿”' }, { tag: 'ğŸ’« ì‹¤í–‰ì™•', phrase1: 'ìƒê°ë§Œ ì•„ë‹ˆë¼', phrase2: 'í–‰ë™ë„ í•´!' }] },            
        ]; 

        // --- 2. í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ í—¬í¼ í•¨ìˆ˜ (ì´ì „ê³¼ ë™ì¼) ---
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split('');
            let line = '';
            let lineCount = 0;
            for(let n = 0; n < words.length; n++) {
                let testLine = line + words[n];
                let metrics = ctx.measureText(testLine);
                let testWidth = metrics.width;
                if (testWidth > maxWidth && n > 0) {
                    ctx.fillText(line, x, y + lineCount * lineHeight);
                    line = words[n];
                    lineCount++;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line, x, y + lineCount * lineHeight);
            return y + (lineCount + 1) * lineHeight; 
        }

        // --- 3. ê°œì¸ ì¹´ë“œ ì•/ë’·ë©´ ê·¸ë¦¬ê¸° í•¨ìˆ˜ (í°íŠ¸ ìŠ¤íƒ€ì¼ í†µì¼) ---
        function drawFrontCard(canvas, cardInfo, cardStyle, userName) {
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            
            ctx.clearRect(0, 0, W, H);
            const gradient = ctx.createLinearGradient(0, 0, 0, H);
            gradient.addColorStop(0, cardStyle.front_bg[0]); 
            gradient.addColorStop(1, cardStyle.front_bg[1]); 
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            ctx.strokeStyle = cardStyle.border;
            ctx.lineWidth = 10;
            ctx.strokeRect(5, 5, W - 10, H - 10);
 
            ctx.fillStyle = cardStyle.border; 
            ctx.font = 'bold 50px "Nanum Pen Script", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(cardInfo.type, W / 2, 80);

            ctx.font = '80px sans-serif'; 
            ctx.fillText(cardInfo.emoji, W / 2, 200);

            ctx.fillStyle = '#333';
            ctx.font = '30px "Nanum Pen Script", sans-serif';
            ctx.fillText("ì´ë¦„:", W / 2 - 120, 300);
            
            ctx.fillStyle = cardStyle.front_text; 
            ctx.font = 'bold 45px "Nanum Pen Script", sans-serif';
            ctx.fillText(userName, W / 2 + 30, 300);
            
            ctx.fillStyle = cardStyle.front_text;
            ctx.font = 'bold 40px "Nanum Pen Script", sans-serif';
            ctx.fillText(cardInfo.quote1, W / 2, 450);
            ctx.fillText(cardInfo.quote2, W / 2, 510);
            
            ctx.fillStyle = '#666';
            ctx.font = '35px "Nanum Pen Script", sans-serif';
            ctx.fillText(cardInfo.tags, W / 2, 650);
        }

        function drawBackCard(canvas, cardInfo, cardStyle) {
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            const MAX_TEXT_WIDTH = W - 120; 
            const START_X = 60;
            let y = 80;

            ctx.clearRect(0, 0, W, H);
            const gradient = ctx.createLinearGradient(0, 0, 0, H);
            gradient.addColorStop(0, cardStyle.back_bg[0]); 
            gradient.addColorStop(1, cardStyle.back_bg[1]); 
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, W, H);
            
            ctx.strokeStyle = cardStyle.back_accent; 
            ctx.lineWidth = 10;
            ctx.strokeRect(5, 5, W - 10, H - 10);

            ctx.textAlign = 'left'; 
            
            // í°íŠ¸ ìŠ¤íƒ€ì¼: Nanum Gothic Coding
            ctx.fillStyle = cardStyle.back_text;
            ctx.font = 'bold 35px "Nanum Gothic Coding", monospace';
            ctx.fillText("ğŸ’ª ë‚˜ì˜ ìŠˆí¼íŒŒì›Œ", START_X - 10, y);
            y += 40;
            
            ctx.fillStyle = '#333';
            ctx.font = '30px "Nanum Gothic Coding", monospace';
            cardInfo.powers.forEach(power => {
                ctx.fillText(`â­ ${power}`, START_X, y);
                y += 40;
            });

            y += 30; 

            ctx.fillStyle = cardStyle.back_accent; 
            ctx.font = 'bold 35px "Nanum Gothic Coding", monospace';
            ctx.fillText("ğŸ’ ë‚˜ëŠ” ì´ëŸ´ ë•Œ ë¹›ë‚˜ìš”:", START_X - 10, y);
            y += 40;

            ctx.fillStyle = '#333';
            ctx.font = '28px "Nanum Gothic Coding", monospace';
            cardInfo.shine.forEach(item => {
                ctx.fillText(`â€¢ ${item}`, START_X, y);
                y += 35;
            });

            y += 30; 

            ctx.fillStyle = cardStyle.back_text; 
            ctx.font = 'bold 35px "Nanum Gothic Coding", monospace';
            ctx.fillText("ğŸ’¡ ì„±ì¥ í¬ì¸íŠ¸:", START_X - 10, y);
            y += 40;

            ctx.fillStyle = '#333';
            ctx.font = '30px "Nanum Gothic Coding", monospace';
            
            y = wrapText(ctx, cardInfo.growth, START_X, y, MAX_TEXT_WIDTH, 35); 
        }

        // --- 4. ëª¨ë“  ì¹­ì°¬ ë©˜íŠ¸ ì¹´ë“œ ê·¸ë¦¬ê¸° í•¨ìˆ˜ (í°íŠ¸ í†µì¼ ë° 2ì¤„ ë©˜íŠ¸ ì ìš©) ---
        function drawAllComplimentsCard(canvas, allData, startIndex, endIndex, title) {
            const ctx = canvas.getContext('2d');
            const W = canvas.width;
            const H = canvas.height;
            const CARD_WIDTH = W / 2 - 15; // 2ì—´ ë°°ì¹˜
            const CARD_HEIGHT = 120; 
            const PADDING = 10;
            const COL_GAP = 10;
            let currentY = 50;
            
            // ë°°ê²½/í…Œë‘ë¦¬
            ctx.fillStyle = '#f7f7f7'; 
            ctx.fillRect(0, 0, W, H);
            ctx.strokeStyle = '#4a90e2'; 
            ctx.lineWidth = 10;
            ctx.strokeRect(5, 5, W - 10, H - 10);

            // íƒ€ì´í‹€
            ctx.fillStyle = '#4a90e2';
            ctx.font = 'bold 45px "Nanum Gothic Coding", monospace';
            ctx.textAlign = 'center';
            ctx.fillText(title, W / 2, 60);

            currentY = 110; 

            for (let dataIndex = startIndex; dataIndex < endIndex && dataIndex < allData.length; dataIndex++) {
                const cardInfo = allData[dataIndex];
                const style = CARD_STYLES[dataIndex];
                const baseColor = style.comp_text; 
                
                // ì„±í–¥ í—¤ë”
                ctx.fillStyle = baseColor;
                ctx.font = 'bold 30px "Nanum Gothic Coding", monospace';
                ctx.textAlign = 'left';
                ctx.fillText(cardInfo.type, PADDING * 2, currentY);
                currentY += 10; 

                // ì¹­ì°¬ ë©˜íŠ¸ 3ê°œ (2ì—´ ë°°ì¹˜)
                cardInfo.compliments.forEach((comp, compIndex) => {
                    const col = compIndex % 2;
                    const row = Math.floor(compIndex / 2);

                    const blockY = currentY + row * (CARD_HEIGHT + PADDING); 
                    const xOffset = PADDING + col * (CARD_WIDTH + COL_GAP);
                    
                    // ë©˜íŠ¸ ë°•ìŠ¤
                    ctx.fillStyle = style.comp_bg; 
                    ctx.fillRect(xOffset, blockY, CARD_WIDTH, CARD_HEIGHT);
                    ctx.strokeStyle = baseColor;
                    ctx.lineWidth = 2;
                    ctx.strokeRect(xOffset, blockY, CARD_WIDTH, CARD_HEIGHT);

                    // íƒœê·¸ (Nanum Gothic Coding)
                    ctx.fillStyle = baseColor;
                    ctx.font = 'bold 22px "Nanum Gothic Coding", monospace'; 
                    ctx.textAlign = 'center';
                    ctx.fillText(`[${comp.tag}]`, xOffset + CARD_WIDTH / 2, blockY + 35);

                    // ğŸš¨ ë©˜íŠ¸ í°íŠ¸ í†µì¼: Nanum Gothic Coding, 2ì¤„ë¡œ ë¶„ë¦¬
                    ctx.fillStyle = '#333';
                    ctx.font = 'bold 24px "Nanum Gothic Coding", monospace'; // í°íŠ¸ í†µì¼ ë° í¬ê¸° ì¡°ì •
                    
                    ctx.fillText(comp.phrase1, xOffset + CARD_WIDTH / 2, blockY + 70);
                    if (comp.phrase2) {
                        ctx.fillText(comp.phrase2, xOffset + CARD_WIDTH / 2, blockY + 100);
                    }
                });
                
                // ë‹¤ìŒ ì„±í–¥ ì‹œì‘ Y ìœ„ì¹˜ ê³„ì‚° (3ê°œ ì„±í–¥ì´ë¯€ë¡œ 2ì¤„ + ì—¬ë°±)
                currentY += (CARD_HEIGHT + PADDING) * 2 + 30; 
            }
        }

        // --- 5. ì¹´ë“œ ìƒì„± í•¨ìˆ˜ (í°íŠ¸ ë¡œë”© ë³´ì¥ ë¡œì§ ì¶”ê°€) ---
        function generateBothCards() {
            const userName = document.getElementById('userName').value.trim();
            const typeIndex = document.getElementById('personalityType').value;
            const cardInfo = CARD_DATA[typeIndex];
            const cardStyle = CARD_STYLES[typeIndex];

            if (!userName) {
                alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            const frontCanvas = document.getElementById('frontCanvas');
            const backCanvas = document.getElementById('backCanvas');
            const allComplimentsCanvas1 = document.getElementById('allComplimentsCanvas1');
            const allComplimentsCanvas2 = document.getElementById('allComplimentsCanvas2');
            const allComplimentsCanvas3 = document.getElementById('allComplimentsCanvas3');
            const allComplimentsCanvas4 = document.getElementById('allComplimentsCanvas4');
            
            // ëª¨ë“  ìº”ë²„ìŠ¤ í‘œì‹œ
            frontCanvas.style.display = 'block'; 
            backCanvas.style.display = 'block'; 
            allComplimentsCanvas1.style.display = 'block'; 
            allComplimentsCanvas2.style.display = 'block'; 
            allComplimentsCanvas3.style.display = 'block'; 
            allComplimentsCanvas4.style.display = 'block'; 

            // ğŸš¨ í°íŠ¸ê°€ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ ê·¸ë¦¬ê¸° ì‹¤í–‰
            document.fonts.ready.then(function () {
                // 1. ê°œì¸ ì¹´ë“œ ê·¸ë¦¬ê¸°
                drawFrontCard(frontCanvas, cardInfo, cardStyle, userName);
                drawBackCard(backCanvas, cardInfo, cardStyle);
                
                // 2. ë©˜íŠ¸ ëª¨ìŒ ì¹´ë“œ ê·¸ë¦¬ê¸° (4ì¥ ë¶„í• )
                drawAllComplimentsCard(allComplimentsCanvas1, CARD_DATA, 0, 3, "âœ¨ ì„±í–¥ë³„ ì¹­ì°¬ ë©˜íŠ¸"); 
                drawAllComplimentsCard(allComplimentsCanvas2, CARD_DATA, 3, 6, "âœ¨ ì„±í–¥ë³„ ì¹­ì°¬ ë©˜íŠ¸"); 
                drawAllComplimentsCard(allComplimentsCanvas3, CARD_DATA, 6, 9, "âœ¨ ì„±í–¥ë³„ ì¹­ì°¬ ë©˜íŠ¸"); 
                drawAllComplimentsCard(allComplimentsCanvas4, CARD_DATA, 9, 12, "âœ¨ ì„±í–¥ë³„ ì¹­ì°¬ ë©˜íŠ¸"); 

                const baseFileName = `${userName}_${cardInfo.type.replace(/\s/g, '_')}`;
                frontCanvas.dataset.fileName = `ì¹­ì°¬ì¹´ë“œ_ì•ë©´_${baseFileName}.png`;
                backCanvas.dataset.fileName = `ì¹­ì°¬ì¹´ë“œ_ë’·ë©´_${baseFileName}.png`; 
                allComplimentsCanvas1.dataset.fileName = `ì¹­ì°¬ë©˜íŠ¸_ëª¨ìŒ_1ë¶€.png`; 
                allComplimentsCanvas2.dataset.fileName = `ì¹­ì°¬ë©˜íŠ¸_ëª¨ìŒ_2ë¶€.png`; 
                allComplimentsCanvas3.dataset.fileName = `ì¹­ì°¬ë©˜íŠ¸_ëª¨ìŒ_3ë¶€.png`; 
                allComplimentsCanvas4.dataset.fileName = `ì¹­ì°¬ë©˜íŠ¸_ëª¨ìŒ_4ë¶€.png`; 
                
                alert(`"${userName}"ë‹˜ì˜ ì¹­ì°¬ ì¹´ë“œ(2ì¥)ì™€ ì¹­ì°¬ ë©˜íŠ¸ ëª¨ìŒ ì¹´ë“œ(4ì¥)ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.`);
            });
        }
        
        // --- 6. ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---
        function downloadCanvasImage(canvas, fileName) {
            try {
                const imageURL = canvas.toDataURL('image/png'); 
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (error) {
                console.error("ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:", error);
                alert("ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬(ëª¨ë°”ì¼) ì €ì¥í•´ ë³´ì„¸ìš”.");
            }
        }

        window.onload = function() {
            const frontCanvas = document.getElementById('frontCanvas');
            const backCanvas = document.getElementById('backCanvas');
            const allComplimentsCanvas1 = document.getElementById('allComplimentsCanvas1');
            const allComplimentsCanvas2 = document.getElementById('allComplimentsCanvas2');
            const allComplimentsCanvas3 = document.getElementById('allComplimentsCanvas3');
            const allComplimentsCanvas4 = document.getElementById('allComplimentsCanvas4');

            const handleCanvasClick = function() {
                const fileName = this.dataset.fileName; 
                
                if (fileName && this.toDataURL('image/png').length > 5000) { 
                    downloadCanvasImage(this, fileName);
                } else {
                    alert("ì¹´ë“œê°€ ì•„ì§ ê·¸ë ¤ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. 'ì¹­ì°¬ í•˜ê¸°' ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
                }
            };

            frontCanvas.addEventListener('click', handleCanvasClick);
            backCanvas.addEventListener('click', handleCanvasClick);
            allComplimentsCanvas1.addEventListener('click', handleCanvasClick);
            allComplimentsCanvas2.addEventListener('click', handleCanvasClick);
            allComplimentsCanvas3.addEventListener('click', handleCanvasClick);
            allComplimentsCanvas4.addEventListener('click', handleCanvasClick);
        };
    </script>
</body>
</html>


